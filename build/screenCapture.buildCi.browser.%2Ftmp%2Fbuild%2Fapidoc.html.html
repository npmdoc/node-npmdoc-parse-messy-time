<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/substack/parse-messy-time">parse-messy-time (v2.1.0)</a>
</h1>
<h4>parse messy human date and time strings</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.parse-messy-time">module parse-messy-time</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.parse-messy-time.parse-messy-time">
            function <span class="apidocSignatureSpan"></span>parse-messy-time
            <span class="apidocSignatureSpan">(str, opts)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.parse-messy-time" id="apidoc.module.parse-messy-time">module parse-messy-time</a></h1>


    <h2>
        <a href="#apidoc.element.parse-messy-time.parse-messy-time" id="apidoc.element.parse-messy-time.parse-messy-time">
        function <span class="apidocSignatureSpan"></span>parse-messy-time
        <span class="apidocSignatureSpan">(str, opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse-messy-time = function (str, opts) {
    if (!opts) opts = {};
    var now = opts.now || new Date;
    if (typeof now === 'number' || typeof now === 'string') now = new Date(now);
    var ago = false;
    var tokens = str.split(tokre).filter(Boolean).map(lc);
    var res = {};
    for (var i = 0; i &lt; tokens.length; i++) {
        var t = tokens[i];
        var next = tokens[i+1];
        var prev = tokens[i-1];
        var m;

        if (m = /(\d+)(st|nd|rd|th)/i.exec(t)) {
            if (next === 'of') {
                next = tokens[i+2];
                i++;
            }
            res.date = Number(m[1]);
            if (monthish(next)) {
                res.month = next;
                i++;
            }
        }
        else if ((m = /(\d+)(st|nd|rd|th)?/i.exec(next))
        &amp;&amp; monthish(t)) {
            res.month = t;
            res.date = Number(m[1]);
            i++;
            if (/^\d+$/.test(tokens[i+1])) { // year
                res.year = Number(tokens[i+1]);
                i++;
            }
        }
        else if ((m = hmsre.exec(t)) &amp;&amp; isunit(next)) {
            if (tokens[i-1] === 'in') {
                for (var j = i; j &lt; tokens.length; j += 2) {
                    if (tokens[j] === 'and') j --;
                    else if ((m = hmsre.exec(tokens[j]))
                    &amp;&amp; ishunit(tokens[j+1])) {
                        addu(parseh(tokens[j]), nunit(tokens[j+1]));
                    }
                    else if ((m = /^(\d+\.?\d*)/.exec(tokens[j]))
                    &amp;&amp; isdunit(tokens[j+1])) {
                        daddu(Number(m[1]), nunit(tokens[j+1]));
                    }
                    else break;
                }
                i = j;
            }
            else {
                for (var j = i + 2; j &lt; tokens.length; j++) {
                    if (tokens[j] === 'ago') {
                        ago = true;
                        break;
                    }
                }
                if (j === tokens.length) continue;

                for (var k = i; k &lt; j; k++) {
                    if ((m = hmsre.exec(tokens[k])) &amp;&amp; ishunit(tokens[k+1])) {
                        subu(parseh(tokens[k]), nunit(tokens[k+1]));
                    }
                    else if ((m = /^(\d+\.?\d*)/.exec(tokens[k]))
                    &amp;&amp; isdunit(tokens[k+1])) {
                        dsubu(Number(m[1]), nunit(tokens[k+1]));
                    }
                }
                i = j;
            }
        }
        else if (/noon/.test(t)) {
          res.hours = 12
          res.minutes = 0
          res.seconds = 0
        }
        else if (/midnight/.test(t)) {
          res.hours = 0
          res.minutes = 0
          res.seconds = 0
        }
        else if (/\d+[:h]\d+/.test(t) || /^(am|pm)/.test(next)) {
            var hms = parseh(t, next);
            if (hms[0] !== null) res.hours = hms[0];
            if (hms[1] !== null) res.minutes = hms[1];
            if (hms[2] !== null) res.seconds = hms[2];
        }
        else if ((m = /^(\d+)/.exec(t)) &amp;&amp; monthish(next)) {
            var x = Number(m[1]);
            if (res.year === undefined &amp;&amp; x &gt; 31) res.year = x;
            else if (res.date === undefined) res.date = x;
            if (res.month === undefined) res.month = next;
            i++;
        }
        else if (monthish(t) &amp;&amp; (m = /^(\d+)/.exec(next))) {
            var x = Number(m[1]);
            if (res.year === undefined &amp;&amp; x &gt; 31) res.year = x;
            else if (res.date === undefined) res.date = x;
            if (res.month === undefined) res.month = t;
            i++;
        }
        else if ((m = /^(\d+)/.exec(t)) &amp;&amp; monthish(prev)) {
            var x = Number(m[1]);
            if (res.year === undefined) res.year = x;
            else if (res.hours === undefined) res.hours = x;
        }
        else if (m = /^[`'\u00b4\u2019](\d+)/.exec(t)) {
            res.year = Number(m[1]);
        }
        else if (/^\d{4}[\W_]\d{1,2}[\W_]\d{1,2}/.test(t)) {
            var yms = t.split(/[\W_]/);
            res.year = Number ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>